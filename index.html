<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KUAA 99.9 FM - Salt Lake City, Utah - Community Radio</title>

    <!-- External CSS and Fonts -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

    <!-- Link to your existing stylesheet -->
    <link rel="stylesheet" href="style.css">

    <!-- New styles for the sticky player and page layout -->
    <style>
        /* Add padding to the bottom of the body to prevent the sticky player from overlapping the footer */
        body {
            padding-bottom: 100px;
            /* Adjust this value to match the height of your sticky player */
        }

        /* Styles for the new sticky player container */
        .sticky-player-wrapper {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 1040;
            /* Ensure it's above other content but below modals if any */
            background-color: #212529;
            /* A default dark background */
            padding: 1rem 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
            color: white;
        }

        /* We'll reuse your existing player, but need to make sure it fits the new container */
        /* This targets your player when it's inside the sticky wrapper */
        .sticky-player-wrapper .player-container {
            max-width: 960px;
            /* Limit width on large screens */
            margin: 0 auto;
            display: flex;
            align-items: center;
            padding: 0 15px;
        }

        .sticky-player-wrapper .player-art-bg {
            flex-shrink: 0;
            width: 60px;
            /* Smaller album art */
            height: 60px;
        }

        .sticky-player-wrapper .player-info {
            flex-grow: 1;
            text-align: left;
            padding-left: 15px;
        }

        .sticky-player-wrapper .player-controls {
            justify-content: flex-end;
        }

        .sticky-player-wrapper .song-title,
        .sticky-player-wrapper .artist-name,
        .sticky-player-wrapper .album-name {
            margin-bottom: 0;
            line-height: 1.2;
        }

        .sticky-player-wrapper .song-title {
            font-size: 1rem;
        }

        .sticky-player-wrapper .artist-name {
            font-size: 0.85rem;
        }

        .sticky-player-wrapper .album-name {
            display: none;
        }

        /* Hide album name to save space */
    </style>
</head>

<body>
    <audio id="audio-player" preload="auto">
        <source src="https://stream.xmission.com/kuaa" type="audio/mpeg">
    </audio>

    <header>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
            <div class="container">
                <a class="navbar-brand" href="#">KUAA 99.9FM</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span
                        class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto align-items-center">
                        <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                        <!-- FIXED: Changed href from listeners.html to #schedule to scroll to the correct section -->
                        <li class="nav-item"><a class="nav-link" href="schedule.html">Schedule</a></li>
                        <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                        <li class="nav-item ms<!DOCTYPE html>
                            <html lang=" en">

                            <head>
                                <meta charset="UTF-8">
                                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                <title>KUAA 99.9 FM - Salt Lake City, Utah - Community Radio</title>

                                <!-- External CSS and Fonts -->
                                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
                                    rel="stylesheet">
                                <link rel="stylesheet"
                                    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
                                <link rel="preconnect" href="https://fonts.googleapis.com">
                                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                                <link
                                    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap"
                                    rel="stylesheet">

                                <!-- Link to your existing stylesheet -->
                                <link rel="stylesheet" href="style.css">

                                <!-- New styles for the sticky player and page layout -->
                                <style>
                                    /* Add padding to the bottom of the body to prevent the sticky player from overlapping the footer */
                                    body {
                                        padding-bottom: 100px;
                                        /* Adjust this value to match the height of your sticky player */
                                    }

                                    /* Styles for the new sticky player container */
                                    .sticky-player-wrapper {
                                        position: fixed;
                                        bottom: 0;
                                        left: 0;
                                        width: 100%;
                                        z-index: 1040;
                                        /* Ensure it's above other content but below modals if any */
                                        background-color: #212529;
                                        /* A default dark background */
                                        padding: 1rem 0;
                                        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
                                        color: white;
                                    }

                                    /* We'll reuse your existing player, but need to make sure it fits the new container */
                                    /* This targets your player when it's inside the sticky wrapper */
                                    .sticky-player-wrapper .player-container {
                                        max-width: 960px;
                                        /* Limit width on large screens */
                                        margin: 0 auto;
                                        display: flex;
                                        align-items: center;
                                        padding: 0 15px;
                                    }

                                    .sticky-player-wrapper .player-art-bg {
                                        flex-shrink: 0;
                                        width: 60px;
                                        /* Smaller album art */
                                        height: 60px;
                                    }

                                    .sticky-player-wrapper .player-info {
                                        flex-grow: 1;
                                        text-align: left;
                                        padding-left: 15px;
                                    }

                                    .sticky-player-wrapper .player-controls {
                                        justify-content: flex-end;
                                    }

                                    .sticky-player-wrapper .song-title,
                                    .sticky-player-wrapper .artist-name,
                                    .sticky-player-wrapper .album-name {
                                        margin-bottom: 0;
                                        line-height: 1.2;
                                    }

                                    .sticky-player-wrapper .song-title {
                                        font-size: 1rem;
                                    }

                                    .sticky-player-wrapper .artist-name {
                                        font-size: 0.85rem;
                                    }

                                    .sticky-player-wrapper .album-name {
                                        display: none;
                                    }

                                    /* Hide album name to save space */
                                </style>
                            </head>

                            <body>
                                <audio id="audio-player" preload="auto">
                                    <source src="https://stream.xmission.com/kuaa" type="audio/mpeg">
                                </audio>

                                <header>
                                    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
                                        <div class="container">
                                            <a class="navbar-brand nav-link" href="/">KUAA 99.9FM</a>
                                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#navbarNav"><span
                                                    class="navbar-toggler-icon"></span></button>
                                            <div class="collapse navbar-collapse" id="navbarNav">
                                                <ul class="navbar-nav ms-auto align-items-center">
                                                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                                                    <li class="nav-item"><a class="nav-link"
                                                            href="/schedule.html">Schedule</a></li>
                                                    <li class="nav-item"><a class="nav-link"
                                                            href="/about.html">About</a></li>
                                                    <li class="nav-item"><a class="nav-link"
                                                            href="/contact.html">Contact</a></li>
                                                    <li class="nav-item ms-lg-2 mt-2 mt-lg-0">
                                                        <button id="nav-play-btn" class="btn btn-danger btn-lg">
                                                            <i id="nav-play-icon" class="bi bi-play-fill"></i> Listen
                                                            Live
                                                        </button>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </nav>
                                </header>

                                <!-- The main content of your page -->
                                <main id="main-content">
                                    <!-- The hero section is the initial content -->
                                    <section id="home" class="hero text-center">
                                        <div class="container">
                                            <div class="row justify-content-center">
                                                <div class="col-lg-10">
                                                    <h1 class="display-4 mb-4">Low Powered FM Community Radio Station in
                                                        Salt Lake City</h1>
                                                    <p class="lead mb-5">KUAA 99.9 FM is a low powered FM community
                                                        radio station broadcasting
                                                        terrestrially in Salt Lake City-lg-2 mt-2 mt-lg-0">
                                                        <button id="nav-play-btn" class="btn btn-danger btn-lg">
                                                            <i id="nav-play-icon" class="bi bi-play-fill"></i> Listen
                                                            Live
                                                        </button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- The main content of your page -->
    <main>
        <!-- The hero section now no longer contains the player -->
        <section id="home" class="hero text-center">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <h1 class="display-4 mb-4">Low Powered FM Community Radio Station in Salt Lake City</h1>
                        <p class="lead mb-5">KUAA 99.9 FM is a low powered FM community radio station broadcasting
                            terrestrially in Salt Lake City at 99.9FM, and streaming around the world at kuaafm.org. We
                            pride ourselves on specializing in musical, cultural, linguistic, and artistic diversity.
                            KUAA is an extension of and brought to you by Utah Arts Alliance.</p>
                        <!-- The player has been moved from here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Your other content sections remain unchanged -->
        <section id="recent-spins" class="py-5">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <h2 class="section-title text-center">Recently Played</h2>
                        <div id="recent-spins-container" class="list-group">
                            <div class="text-center p-3">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="schedule" class="py-5 bg-light">
            <div class="container">
                <h2 class="section-title text-center">Program Schedule</h2>
                <ul class="nav nav-pills justify-content-center mb-4" id="schedule-tabs" role="tablist">
                    <li class="nav-item" role="presentation"><button class="nav-link" id="sunday-tab"
                            data-bs-toggle="tab" data-bs-target="#sunday" type="button" role="tab">Sun</button></li>
                    <li class="nav-item" role="presentation"><button class="nav-link" id="monday-tab"
                            data-bs-toggle="tab" data-bs-target="#monday" type="button" role="tab">Mon</button></li>
                    <li class="nav-item" role="presentation"><button class="nav-link" id="tuesday-tab"
                            data-bs-toggle="tab" data-bs-target="#tuesday" type="button" role="tab">Tue</button></li>
                    <li class="nav-item" role="presentation"><button class="nav-link" id="wednesday-tab"
                            data-bs-toggle="tab" data-bs-target="#wednesday" type="button" role="tab">Wed</button></li>
                    <li class="nav-item" role="presentation"><button class="nav-link" id="thursday-tab"
                            data-bs-toggle="tab" data-bs-target="#thursday" type="button" role="tab">Thu</button></li>
                    <li class="nav-item" role="presentation"><button class="nav-link" id="friday-tab"
                            data-bs-toggle="tab" data-bs-target="#friday" type="button" role="tab">Fri</button></li>
                    <li class="nav-item" role="presentation"><button class="nav-link" id="saturday-tab"
                            data-bs-toggle="tab" data-bs-target="#saturday" type="button" role="tab">Sat</button></li>
                </ul>
                <div class="tab-content" id="schedule-content">
                    <div class="tab-pane fade" id="sunday" role="tabpanel">
                        <div class="text-center p-3">
                            <div class="spinner-border text-primary" role="status"><span
                                    class="visually-hidden">Loading...</span></div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="monday" role="tabpanel">
                        <div class="text-center p-3">
                            <div class="spinner-border text-primary" role="status"><span
                                    class="visually-hidden">Loading...</span></div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="tuesday" role="tabpanel">
                        <div class="text-center p-3">
                            <div class="spinner-border text-primary" role="status"><span
                                    class="visually-hidden">Loading...</span></div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="wednesday" role="tabpanel">
                        <div class="text-center p-3">
                            <div class="spinner-border text-primary" role="status"><span
                                    class="visually-hidden">Loading...</span></div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="thursday" role="tabpanel">
                        <div class="text-center p-3">
                            <div class="spinner-border text-primary" role="status"><span
                                    class="visually-hidden">Loading...</span></div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="friday" role="tabpanel">
                        <div class="text-center p-3">
                            <div class="spinner-border text-primary" role="status"><span
                                    class="visually-hidden">Loading...</span></div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="saturday" role="tabpanel">
                        <div class="text-center p-3">
                            <div class="spinner-border text-primary" role="status"><span
                                    class="visually-hidden">Loading...</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Added placeholder content for About and Contact to make anchor links work -->
        <section id="about" class="py-5">
            <div class="container text-center">
                <h2 class="section-title">About KUAA</h2>
                <p>More information about the station will go here.</p>
            </div>
        </section>

        <section id="contact" class="py-5 bg-light">
            <div class="container text-center">
                <h2 class="section-title">Contact Us</h2>
                <p>Details on how to get in touch will go here.</p>
            </div>
        </section>

    </main>

    <footer class="footer py-4">
        <div class="container text-center">
            <div class="mb-3">
                <a href="#" class="fs-4 mx-2"><i class="bi bi-facebook"></i></a>
                <a href="#" class="fs-4 mx-2"><i class="bi bi-instagram"></i></a>
                <a href="#" class="fs-4 mx-2"><i class="bi bi-twitter-x"></i></a>
            </div>
            <p>&copy; 2025 KUAA 99.9 FM. A project of the <a href="https://utaharts.org/" target="_blank">Utah Arts
                    Alliance</a>.</p>
        </div>
    </footer>

    <!-- NEW: Sticky Player Wrapper -->
    <div class="sticky-player-wrapper">
        <!-- MOVED: Your entire player container is now inside the sticky wrapper -->
        <div id="player-container" class="player-container">
            <div id="player-art-bg" class="player-art-bg">
                <img id="player-art-fg" src="https://placehold.co/200/2d3436/dfe6e9?text=KUAA" alt="Album Art"
                    class="player-art-fg" crossorigin="anonymous">
            </div>
            <div class="player-info">
                <p id="player-song" class="song-title mb-0">Loading Song...</p>
                <p id="player-artist" class="artist-name mb-1">Loading Artist...</p>
                <p id="player-album" class="album-name mb-3">Loading Album...</p>
            </div>
            <div class="player-controls d-flex justify-content-center align-items-center">
                <button id="volume-btn" class="mx-3" aria-label="Toggle Mute"><i id="volume-icon"
                        class="bi bi-volume-up-fill"></i></button>
                <button id="play-pause-btn" class="play-btn mx-3" aria-label="Play or Pause"><i id="play-pause-icon"
                        class="bi bi-play-fill"></i></button>
                <button class="mx-3" aria-label="Favorite this song"><i class="bi bi-heart"></i></button>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>

    <!-- Your existing JavaScript, no changes needed here -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const colorThief = new ColorThief();

            // --- PLAYER CONTROLS ---
            const audioPlayer = document.getElementById('audio-player');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const playPauseIcon = document.getElementById('play-pause-icon');
            const navPlayBtn = document.getElementById('nav-play-btn');
            const navPlayIcon = document.getElementById('nav-play-icon');
            const volumeBtn = document.getElementById('volume-btn');
            const volumeIcon = document.getElementById('volume-icon');

            function togglePlay() {
                if (audioPlayer.paused) {
                    audioPlayer.play().catch(e => console.error("Play initiation failed:", e));
                } else {
                    audioPlayer.pause();
                }
            }

            function updatePlayIcons() {
                const isPlaying = !audioPlayer.paused;
                playPauseIcon.className = isPlaying ? 'bi bi-pause-fill' : 'bi bi-play-fill';
                navPlayIcon.className = isPlaying ? 'bi bi-pause-fill' : 'bi bi-play-fill';
            }

            function toggleMute() {
                audioPlayer.muted = !audioPlayer.muted;
                volumeIcon.className = audioPlayer.muted ? 'bi bi-volume-mute-fill' : 'bi bi-volume-up-fill';
            }

            playPauseBtn.addEventListener('click', togglePlay);
            navPlayBtn.addEventListener('click', togglePlay);
            volumeBtn.addEventListener('click', toggleMute);
            audioPlayer.addEventListener('play', updatePlayIcons);
            audioPlayer.addEventListener('pause', updatePlayIcons);
            audioPlayer.addEventListener('volumechange', () => {
                volumeIcon.className = audioPlayer.muted || audioPlayer.volume === 0 ? 'bi bi-volume-mute-fill' : 'bi bi-volume-up-fill';
            });

            // --- NOW PLAYING ---
            const nowPlayingApiUrl = `/.netlify/functions/get-now-playing`;
            const playerContainer = document.getElementById('player-container');
            const playerSong = document.getElementById('player-song');
            const playerArtist = document.getElementById('player-artist');
            const playerAlbum = document.getElementById('player-album');
            const playerArtBg = document.getElementById('player-art-bg');
            const playerArtFg = document.getElementById('player-art-fg');

            const fetchNowPlaying = async () => {
                try {
                    const response = await fetch(nowPlayingApiUrl);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const data = await response.json();

                    if (data.items && data.items.length > 0) {
                        const latestSpin = data.items[0];

                        playerSong.textContent = latestSpin.song || 'Music Variety';
                        playerArtist.textContent = latestSpin.artist || 'Various Artists';
                        playerAlbum.textContent = latestSpin.release || 'KUAA';

                        const imageUrl = latestSpin.image || 'https://placehold.co/200/2d3436/dfe6e9?text=KUAA';
                        if (playerArtFg.src !== imageUrl) {
                            playerArtFg.src = imageUrl;
                            playerArtBg.style.backgroundImage = `url(${imageUrl})`;

                            playerArtFg.addEventListener('load', () => {
                                try {
                                    const dominantColor = colorThief.getColor(playerArtFg);
                                    const rgbColor = `rgb(${dominantColor.join(',')})`;
                                    playerContainer.style.setProperty('--player-bg', rgbColor);
                                } catch (e) {
                                    playerContainer.style.setProperty('--player-bg', '#2d3436');
                                }
                            }, { once: true });
                        }
                    } else {
                        playerContainer.style.setProperty('--player-bg', '#2d3436');
                    }
                } catch (error) {
                    console.error("Error fetching Now Playing data:", error);
                    playerContainer.style.setProperty('--player-bg', '#2d3436');
                }
            };

            // --- RECENT SPINS ---
            const recentSpinsApiUrl = `/.netlify/functions/get-recent-spins`;
            const recentSpinsContainer = document.getElementById('recent-spins-container');

            const fetchRecentSpins = async () => {
                try {
                    const response = await fetch(recentSpinsApiUrl);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const data = await response.json();

                    if (data.items && data.items.length > 1) {
                        const recent = data.items.slice(1);
                        let recentHtml = '';
                        recent.forEach(spin => {
                            recentHtml += `
                                <div class="list-group-item list-group-item-action d-flex align-items-center recent-spin-item">
                                    <img src="${spin.image || 'https://placehold.co/50x50/A8DADC/1D3557?text=?'}" class="rounded me-3" alt="Album art">
                                    <div class="flex-grow-1">
                                        <div class="fw-bold">${spin.song || 'Untitled'}</div>
                                        <div>${spin.artist || 'Unknown Artist'}</div>
                                    </div>
                                </div>`;
                        });
                        recentSpinsContainer.innerHTML = recentHtml;
                    } else {
                        recentSpinsContainer.innerHTML = '<p class="text-center p-3">No recent songs to display.</p>';
                    }
                } catch (error) {
                    console.error("Error fetching recent spins:", error);
                }
            };

            // --- SCHEDULE ---
            const scheduleApiUrl = `/.netlify/functions/get-schedule`;
            const formatTime = (timeString) => {
                if (!timeString) return '';
                const [hours, minutes] = timeString.split(':');
                const date = new Date();
                date.setHours(hours, minutes, 0);
                return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
            };
            const renderSchedule = (showsByDay) => {
                const dayMap = { 0: 'sunday', 1: 'monday', 2: 'tuesday', 3: 'wednesday', 4: 'thursday', 5: 'friday', 6: 'saturday' };
                for (const dayIndex in dayMap) {
                    const dayName = dayMap[dayIndex];
                    const container = document.getElementById(dayName);
                    const dayShows = showsByDay[dayIndex];
                    if (!container) continue;
                    if (!dayShows || dayShows.length === 0) {
                        container.innerHTML = '<p class="text-center p-3">No shows scheduled for today.</p>';
                    } else {
                        let tableHTML = `<table class="table table-striped table-hover"><thead class="table-dark"><tr><th>Time</th><th>Show</th><th>DJ/Host</th></tr></thead><tbody>`;
                        dayShows.forEach(show => {
                            const [startHours, startMinutes] = show.start_time.split(':');
                            const startDate = new Date();
                            startDate.setHours(startHours, startMinutes, 0, 0);
                            const endDate = new Date(startDate.getTime() + show.duration * 1000);
                            const endTimeString = endDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
                            tableHTML += `<tr><td>${formatTime(show.start_time)} - ${endTimeString}</td><td>${show.title || 'Untitled Show'}</td><td>${show.persona_name || 'KUAA'}</td></tr>`;
                        });
                        tableHTML += `</tbody></table>`;
                        container.innerHTML = tableHTML;
                    }
                }
            };
            const fetchSchedule = async () => {
                try {
                    const response = await fetch(scheduleApiUrl);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const scheduleData = await response.json();
                    const finalSchedule = scheduleData.items;
                    const showsByDay = { 0: [], 1: [], 2: [], 3: [], 4: [], 5: [], 6: [] };
                    finalSchedule.forEach(show => {
                        const scheduleDays = show.days;
                        const startTime = show.start_time;
                        if (scheduleDays && Array.isArray(scheduleDays) && startTime) {
                            scheduleDays.forEach(dayIndex => {
                                if (dayIndex >= 0 && dayIndex <= 6) {
                                    showsByDay[dayIndex].push(show);
                                }
                            });
                        }
                    });
                    for (const day in showsByDay) {
                        showsByDay[day].sort((a, b) => a.start_time.localeCompare(b.start_time));
                    }
                    renderSchedule(showsByDay);
                } catch (error) {
                    console.error("Error fetching schedule:", error);
                }
            };


            // --- INITIALIZE ---
            fetchNowPlaying();
            fetchRecentSpins();
            fetchSchedule();
            setInterval(fetchNowPlaying, 20000);
            setInterval(fetchRecentSpins, 60000);

            const todayIndex = new Date().getDay();
            const dayMap = { 0: 'sunday', 1: 'monday', 2: 'tuesday', 3: 'wednesday', 4: 'thursday', 5: 'friday', 6: 'saturday' };
            const todayTab = document.getElementById(`${dayMap[todayIndex]}-tab`);
            if (todayTab) {
                const tab = new bootstrap.Tab(todayTab);
                tab.show();
            }

            // --- SMOOTH SCROLL ---
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    if (this.getAttribute('data-bs-toggle') === 'tab' || this.id === 'nav-play-btn') return;
                    e.preventDefault();
                    const targetElement = document.querySelector(this.getAttribute('href'));
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        });
    </script>
</body>

</html>